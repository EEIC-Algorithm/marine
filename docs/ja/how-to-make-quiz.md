# How to make Quiz
Quizは選択問題、または穴埋め問題の集合体です。
それぞれの問題はQuestionと呼ばれており、現時点では以下の2種類のQuestionがあります。


- MCQ(Multiple Choices Question) - 選択問題
  - 複数の選択肢の中から1つまたは複数の正答を選択させる問題
- FIB(Fill In Blank) - 穴埋め問題
  - 1つまたは複数の空欄をテキストで記述させる問題

trackではマークダウン記法を使っ複数のQuestionを含む文書を作成することができます。

## Basic Rule
問題の作り方の基本ルールは以下のとおりです。

- 見出し2`##`に問題のタイトルを記述
- その下に問題文をマークダウンで記述
  - ただし、見出し(`#` 〜 `######`)は文章中では使えません
- マークダウン中に複数の`- [ ]`、または`- [x]`で始まる行がある場合、その問題はMCQとして扱われます
  - 正解の選択肢(`- [x]`)が1つもない場合はコンパイルエラーとなります
- それ以外の場合はFIBとなります
  - FIBの文中では`${xxxx}`(完全一致)、`${/xxxx/}`(正規表現)のような形で穴埋め部分を定義することができます
  - 文中に穴埋め定義が1つもない場合はコンパイルエラーとなります

文書はmarkedによる変換で自然なマークダウンとして表示されます。

## Advanced Rule
### 問題文のパート(Experimental)
** 現行のtrackではQuizはパート分けされずに表示されるため以下のパート分割の機能は実質的に無効です。**

問題文は`-`を使って定義された最初のヘアライン(`---`)によって2つの部分に分割されます。
ただし、文章中にヘアラインが現れない場合は第1パートが空で、すべてが第2パートとして扱われます。

- 2個め以降のヘアラインは第2パートの一部として扱われます。
- `-`以外を使用して定義したヘアライン(`***`など)は分割文字として扱われないので、第1パートにもヘアラインを含めることは可能です。

### 画像について
マークダウンから画像を参照する際は、後述するtrack.ymlのimagesセクションにそのファイルを指定する必要があります。
個別に指定するのが面倒な場合は

```
images:
  - images/*.png
```

のようにまとめて指定することもできます。


文章を定義したマークダウンファイルからの相対パスで参照してください。

```
[画像1](images/image1.png)
```

サーバー登録時には画像はpublicなパスに保存して置換されます。

#### 画像の幅を指定する(暫定仕様)
** この仕様は将来的に変更されますが互換性のため機能自体は維持されます。**

デフォルトでは参照された画像は`width:100%`で描画されます。
画像サイズを明示する場合はマークダウンのaltの部分に`,`で区切って`w=100px`のように幅を指定してください。


```
[画像1,w=100px](images/image1.png)
```

`,`以降が`w=xxxx`の書式となっていない場合は無視されます。
またとalt部分の文字列で`,`を含める方法はありません。


### 穴埋め問題の記法
穴埋め定義に使用するシンタックスはデフォルトで`${}`です。
ただ、文章中にES6のコードを引用する場合にはこの記法が普通に使われる場合があります。

この場合、見出し2(Questionのタイトル)の直下に

```
- prefix: %
```

というスイッチを置くことで穴埋めに使うシンタックスを`%{}`に変更することができます。
このスイッチは見出し2の直下に現れた場合にしか機能せず、それ以外の場所に現れた場合は普通に文章の一部として扱われます。

また以下のように正規表現を使用することも可能です。

```
// 大文字小文字の区別なく、`red`または`green`が正解
${/red|green/i}
```

### 見出し1
文書の先頭にのみ見出し1(`#`)を置くことができ、その下に簡単な説明を書くことができます。

trackのQuiz取り込みではこの部分は無視されます。

### hint, tips, answer
問題文の最後に見出し3(`###`)を使ってhint、tips、answerを定義することができます。(同時に複数定義することもできます)


```
### hint
この問題を解くには。。。。

### tips
hintの代わりにtipsとして定義することもできます。
```

ここで定義した内容はコンパイル時に捨てられるので、画面上に出てくることはありません。

## track.ymlについて
track.ymlは以下のように定義してください。

```
type: quiz
questions:
- file1.md
- file2.md
images:
- images/*.png
```

- `type`は`quiz`固定
- `questions`に問題を記述したファイルを定義(複数可)
- 画像ファイルを使用する場合は`images`に画像ファイルへのパスを定義(ワイルドカード使用可)

